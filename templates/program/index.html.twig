{% extends 'base.html.twig' %}

{% block title %}All programs{% endblock %}

{% block body %}
    <div class="container mt-3">
        <h1>{{ 'All programs from program\'s table' |trans }} : </h1>
        {{ form_start(form,  {'attr': {'class': 'search-form'}}) }}
        <h2>{{ 'filter' |trans }}</h2>
        {{ form_row(form.searchTitle,  { 'label': 'search by title or piece of title' }) }}
        {{ form_row(form.searchActor,  { 'label': 'search by lastname of on actor that plays in the program' }) }}
        <button class="btn btn-primary">{{ button_label|default('search' |trans ) }}</button>
        {{ form_end(form) }}
        {% for program in programs %}
            <div class="card flex-row align-items-center mb-3 shadow">
                <img class="mr-3" src="{{ program.poster }}" alt="{{ program.title }} poster">
                <div class="card-body">
                    <h2>{{ loop.index }} / {{ program.title }} - {{ 'program.category' |trans }} : {{ program.category.name }}</h2>
                    <p>{{ program.synopsis }}</p>
                    <a href="{{ path("program_show", { program: program.slug }) }}">{{ 'See_details' |trans }}</a>
                    <div class="list-actor">
                        <strong>{{ 'Actors' |trans }} :</strong>
                        <ul>
                            {% for actor in program.actors %}
                                <li><a href="{{ path("actor_show", { id: actor.id }) }}"> {{ actor.name }}</a></li>
                            {% else %}
                                <li>{{ 'no_actor' |trans }}</li>
                            {% endfor %}
                        </ul>
                    </div>
                </div>
            </div>
        {% else %}
            {{ 'no_program' |trans }}
        {% endfor %}

        <a href="{{ path('app_index') }}">
            {{ 'back.home' |trans }}
        </a>
    </div>
{% endblock %}
